{{define "page.title"}}Gap{{end}}

{{define "app-body"}}

	<div id="upload" class="sw-hero-gap" style="background-image: url({{.Gap.Cover}});">
		{{template "modal-upload-img"}}
		<div class="avatar _bdrd-50pct">
			<div class="_pst-rlt" id="gtm-button" data-gtm-button="gap_avatar">
				<img class="img-fluid" src="{{.Gap.Display}}">
				{{if .Gap.IsOwner}}
					<div class="icon-upload _cs-pt _jtfct-ct _alit-ct" title="เปลี่ยนรูปภาพ" @click="openModal('p')">
						<i class="fs-40 fal fa-camera"></i>
					</div>
				{{end}}
			</div>
		</div>
		{{if .Gap.IsOwner}}
			<div class="container _pst-rlt _h-100pct" style="z-index: 1;">
				<div class="_dp-n _dp-b-lg _pst-asl" style="bottom: 0;" id="gtm-button" data-gtm-button="gap_change_cover">
					<button class="btn sw-btn-cover _bdrd-0 _pdh-20" @click="openModal('c')">
						<i class="fs-13 fa fa-camera _mgr-10"></i>
						<span class="fs-14 _fw-600">เปลี่ยนรูปปก</span>
					</button>
				</div>
			</div>
		{{end}}
	</div>
	<div id="app" class="container _pst-rlt">
		{{template "modal-list-follow" .}}
		<div class="setting-gap _dp-ilf _pst-asl" id="gtm-link" data-gtm-link="gap_setting">
			{{if .Gap.IsOwner}}
				<a href="{{route "gap"}}{{.Gap.GetUsername}}/setting" class="_dp-f _alit-ct _cl-gray-7 _cl-gray-4-hover _tdcrt-n">
					ข้อมูลเพจ <i class="fs-20 fas fa-cog _mgl-5"></i>
				</a>
			{{else}}
				<!-- <a class="fs-13 _cl-gray-5 _mgr-5" href="">
					เกี่ยวกับเพจ
				</a> -->
			{{end}}
		</div>

		<div class="row">
			<div class="col-12 col-lg-6 offset-lg-3 _mgt-60 _mgt-100-md">
				<div class="_dp-f _alit-ct _jtfct-ct _mgbt-15">
					<h1 class="fs-18 _fw-600 _cl-white _mgbt-0 _mgr-6">{{.Gap.Name | html}}</h1>
					{{if .Gap.IsVerify}}
					<img class="shield _w-15 _h-15" src="/-/images/icon/shield-15@2x.png" title="verified">
					{{end}}
				</div>
				<h3 class="fs-14 _cl-gray-7 _mgbt-24 _tal-ct">{{.Gap.Bio | html}}</h3>
			</div>
			<!-- check if mygap and check if OfficialGap  -->
			{{if and (not .Gap.IsOwner) (not .IsGapOfficial)}}
				<div class="col-12 _dp-f _jtfct-ct _mgbt-24" id="gtm-button" data-gtm-button="gap_follow">
					{{if .Gap.IsFollow}}
						<button class="btn btn-create-gap _bdcl-gray-7 _bdcl-gray-1-hover _dp-ilf _jtfct-ct _alit-ct _h-30 _pdv-0 acfollow"
						data-gap-id="{{.Gap.ID}}">
							<i class="far fa-minus fs-14 _cl-gray-1"></i>
							<span class="fs-14 _cl-white _mgl-14 followtext">เลิกติดตาม</span>
						</button>
					{{else}}
						<button class="btn btn-create-gap _bdcl-gray-7 _bdcl-gray-1-hover _dp-ilf _jtfct-ct _alit-ct _h-30 _pdv-0 _pdh-20 acfollow"
						data-gap-id="{{.Gap.ID}}">
							<i class="far fa-plus fs-14 _cl-gray-1"></i>
							<span class="fs-14 _cl-white _mgl-14 followtext">ติดตาม</span>
						</button>
					{{end}}
				</div>
			{{end}}
			<!-- end comment  -->
			<div class="col-12 col-md-6 offset-md-3 col-lg-4 offset-lg-4 _dp-f _jtfct-ct _alit-ct _pdh-0 _pdv-10"
			style="background-color: rgba(44, 62, 85, 0.4);">
				<a
				class="col _dp-f _fdrt-cl _alit-ct fs-14 _cs-pt _tdcrt-n _cl-white _bdrw-1 _bdcl-blue-3"
				href="{{route "gap"}}{{.Gap.GetUsername}}"
				id="gtm-link" data-gtm-link="gap_content">
					<div class="count">{{.Gap.Count.Post | shortNumber}}</div>
					<div class="text">คอนเทนต์</div>
				</a>
				<div class="col _dp-f _fdrt-cl _alit-ct fs-14 _cs-pt _cl-gray-9 _cl-white-hover" @click="doToggle"
				id="gtm-link" data-gtm-link="gap_follower">
					<div class="count">{{.Gap.Count.Follower | shortNumber}}</div>
					<div class="text">ผู้ติดตาม</div>
				</div>
			</div>
		</div>

	</div>
	<div id="post-container" class="content">
		<div class="container _mgbt-50 _pdh-0-sm _pdh-10-lg" :class="{'_mh-1000': !hasPost && isAjax}">
			<div class="row content-post _mgt-15 _mgt-32-lg" ref="postList">
				{{template "post-item"}}
			</div>
			<div v-cloak class="_mh-80">
				<infinite-loading @infinite="infiniteHandler" ref="infiniteLoading" spinner="spiral" :distance="300">
					<div slot="no-results">
						<h5 class="_cl-white _tal-ct fs-14">ยังไม่มีคอนเทนต์</h5>
					</div>
					<div slot="no-more">
						<h5 class="_cl-white _tal-ct fs-14">ไม่มีคอนเทนต์เพิ่มเติม</h5>
					</div>
				</infinite-loading>
			</div>
		</div>
	</div>
{{end}}

{{define "main.style"}}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.3.5/cropper.min.css">
{{end}}